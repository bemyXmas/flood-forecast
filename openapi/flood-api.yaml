openapi: 3.0.0
info:
  title: Flood Forecast API
  description:
    This API provides flood forecast data happening in Thailand.
    * Rain and flood warning gathered by google form.
    * Weather report every 3 hours by OpenWeatherAPI.
    * Flood forecast data by WCPC.
    * Dam water level by egat_dam.
  version: 3.0.0
servers:
  - url: /flood-forecast-api
paths:
  /weather-report:
    get:
      summary: Returns a list of flood forecast data happening in Thailand.
      tags:
        - weatherreport
      operationId: controller.get_weather_report
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WeatherReport'
  /weather-report/{country}:
    parameters:
    - name: country
      in: path
      required: true
      description: country name
      schema:
        type: string
    get:
      summary: Returns complete details of the specified country weather report
      tags: 
        - weatherreport
      operationId: controller.get_weather_report_details
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeatherReport'
  /damlevel:
    get:
      summary: Returns a list of dam water level in sector of Thailand.
      tags:
        - damlevel
      operationId: controller.get_dam_level
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DamLevel'
  /damlevel/{sector}:
    parameters:
    - name: sector
      in: path
      required: true
      description: sector name
      schema:
        type: string
    get:
      summary: Returns complete details of the specified sector
      tags: 
        - damlevel
      operationId: controller.get_dam_level_details
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DamLevel'
  /forecast:
    get:
      summary: Returns a list of flood forecast of Thailand.
      tags:
        - forecast
      operationId: controller.get_forecast
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Forecast'
  /forecast/{Type}:
    parameters:
    - name: Type
      in: path
      required: true
      description: Type detail of the flood
      schema:
        type: string
    get:
      summary: Returns complete details of the specified flood type
      tags: 
        - forecast
      operationId: controller.get_forecast_details
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forecast'
  /questionniare:
    get:
      summary: Returns a list of flood questionniare that we collected.
      tags:
        - questionniare
      operationId: controller.get_questionniare
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Questionniare'
  /questionniare/{province}:
    parameters:
    - name: province
      in: path
      required: true
      description: detail of questionniare by province
      schema:
        type: string
    get:
      summary: Returns complete details of the specified flood type
      tags: 
        - questionniare
      operationId: controller.get_questionniare_details
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Questionniare'
  

components:
  schemas:
    WeatherReport:
      type: object
      properties:
        country:
          type: string
        main:
          type: string
        humidity:
          type: integer
        description:
          type: string
    DamLevel:
      type: object
      properties:
        date:
          type: string
        sector:
          type: string
        water_retention:
          type: integer
        can_reveive_more:
          type: integer
    Forecast:
      type: object
      properties:
        month:
          type: string
        TAMBON_T:
          type: string
        AMPHOE_T:
          type: string
        PROV_T:
          type: string
        Type:
          type: string
        sector:
          type: string
    Questionniare:
      type: object
      properties:
        sector:
          type: string
        province:
          type: string
        amphoe:
          type: string
        warning_freq:
          type: string
        warning_wat:
          type: string
        want_warning_way:
          type: string
        type:
          type: string
        flood_freq:
          type: string
        rain_freq:
          type: integer
    